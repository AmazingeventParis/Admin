<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin ‚Äî SwipeGo</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<!-- Loading -->
<div class="page-loading" id="page-loading"><span class="spinner"></span> Chargement...</div>

<!-- Page content (hidden until auth) -->
<div id="page-content" style="display:none">

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <a href="/" class="navbar-brand">Swipe<span>Go</span> Admin</a>
        <div class="navbar-links">
            <a href="/">Dashboard</a>
            <a href="/users.html">Utilisateurs</a>
        </div>
        <div class="navbar-user">
            <span id="navbar-email"></span>
            <button class="btn-logout" onclick="logout()">Deconnexion</button>
        </div>
    </nav>

    <!-- Dashboard -->
    <div class="container">
        <h1 class="page-title">Swipe<span>Go</span> Admin</h1>
        <p class="page-subtitle">Tous les projets et outils ‚Äî un seul endroit</p>

        <!-- Apps -->
        <div class="section">
            <div class="section-title">Applications</div>
            <div class="grid">
                <a class="card" href="https://crypto.swipego.app" target="_blank">
                    <div class="card-icon">üìà</div>
                    <div class="card-content">
                        <div class="card-name">CryptoSignals <span class="badge badge-prod">PROD</span></div>
                        <div class="card-desc">Bots de trading V1/V2 + Freqtrade. Dashboard temps reel, signaux, paper trading.</div>
                        <div class="card-url">crypto.swipego.app</div>
                    </div>
                </a>
                <a class="card" href="https://freqtrade.swipego.app" target="_blank">
                    <div class="card-icon">ü§ñ</div>
                    <div class="card-content">
                        <div class="card-name">Freqtrade <span class="badge badge-prod">PROD</span></div>
                        <div class="card-desc">Bot Freqtrade MEXC Futures. CombinedStrategy EMA + RSI + BB + ADX.</div>
                        <div class="card-url">freqtrade.swipego.app</div>
                    </div>
                </a>
                <a class="card" href="https://focusracer.swipego.app" target="_blank">
                    <div class="card-icon">üì∏</div>
                    <div class="card-content">
                        <div class="card-name">Focus Racer <span class="badge badge-prod">PROD</span></div>
                        <div class="card-desc">Plateforme photo pour evenements. Upload, galeries, photographes.</div>
                        <div class="card-url">focusracer.swipego.app</div>
                    </div>
                </a>
                <a class="card" href="https://lokashopy.swipego.app" target="_blank">
                    <div class="card-icon">üõí</div>
                    <div class="card-content">
                        <div class="card-name">Lokashopy <span class="badge badge-prod">PROD</span></div>
                        <div class="card-desc">Comparateur de prix. Deploye sur ancien serveur.</div>
                        <div class="card-url">lokashopy.swipego.app</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Outils -->
        <div class="section">
            <div class="section-title">Outils</div>
            <div class="grid">
                <a class="card" href="https://upload.swipego.app" target="_blank">
                    <div class="card-icon">üìÅ</div>
                    <div class="card-content">
                        <div class="card-name">Upload Tool <span class="badge badge-tool">TOOL</span></div>
                        <div class="card-desc">Upload de fichiers pour code-server. Glisser-deposer, Ctrl+V, lien direct.</div>
                        <div class="card-url">upload.swipego.app</div>
                    </div>
                </a>
                <a class="card" href="https://code.swipego.app" target="_blank">
                    <div class="card-icon">üíª</div>
                    <div class="card-content">
                        <div class="card-name">Code Server <span class="badge badge-tool">TOOL</span></div>
                        <div class="card-desc">VS Code dans le navigateur. Acces distant au code de tous les projets.</div>
                        <div class="card-url">code.swipego.app</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Infra -->
        <div class="section">
            <div class="section-title">Infrastructure</div>
            <div class="grid">
                <a class="card" href="https://coolify.swipego.app" target="_blank">
                    <div class="card-icon">üöÄ</div>
                    <div class="card-content">
                        <div class="card-name">Coolify <span class="badge badge-infra">INFRA</span></div>
                        <div class="card-desc">PaaS self-hosted. Deployement, monitoring, logs de toutes les apps.</div>
                        <div class="card-url">coolify.swipego.app</div>
                    </div>
                </a>
                <a class="card" href="https://supabase.swipego.app" target="_blank">
                    <div class="card-icon">üóÑÔ∏è</div>
                    <div class="card-content">
                        <div class="card-name">Supabase <span class="badge badge-infra">INFRA</span></div>
                        <div class="card-desc">Base de donnees PostgreSQL self-hosted. Dashboard, auth, API REST.</div>
                        <div class="card-url">supabase.swipego.app</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Stockage S3 -->
        <div class="section">
            <div class="section-title">Stockage S3 (OVH Object Storage)</div>
            <div class="infra-box">
                <div style="display:flex;align-items:center;gap:10px;margin-bottom:16px">
                    <span style="font-size:28px">ü™£</span>
                    <span style="font-size:16px;font-weight:700">shootnbox ‚Äî OVH Storage</span>
                    <span class="badge badge-infra">S3</span>
                </div>
                <div style="display:grid;grid-template-columns:120px 1fr;gap:8px 12px;font-size:13px">
                    <span style="color:#8b949e">Endpoint</span>
                    <span><code style="color:#58a6ff">s3.sbg.io.cloud.ovh.net</code></span>
                    <span style="color:#8b949e">Virtual Host</span>
                    <span><code style="color:#58a6ff">shootnbox.s3.sbg.io.cloud.ovh.net</code></span>
                    <span style="color:#8b949e">Region</span>
                    <span>Strasbourg (sbg) ‚Äî 1-AZ</span>
                    <span style="color:#8b949e">Utilisateur</span>
                    <span>user-JjsBnnJNmB49</span>
                    <span style="color:#8b949e">Access Key</span>
                    <span><code style="color:#3fb950;word-break:break-all">2d781d2297d7468396dc3a0ebb8842d3</code></span>
                    <span style="color:#8b949e">Secret Key</span>
                    <span><code style="color:#3fb950;word-break:break-all">8b73965386e140e9b1f61861be02aa4e</code></span>
                    <span style="color:#8b949e">Chiffrement</span>
                    <span>SSE-OMK</span>
                </div>
                <div style="margin-top:16px;padding-top:16px;border-top:1px solid #30363d">
                    <button onclick="downloadS3Creds()" class="btn-small" style="background:#1f6feb;color:#fff;padding:8px 16px;font-size:12px;border-radius:6px">Telecharger les credentials (.txt)</button>
                </div>
            </div>
        </div>

        <!-- Acces Claude par projet -->
        <div class="section">
            <div class="section-title">Acces Claude / IA ‚Äî Par projet</div>
            <div class="claude-box">
                <p>Copiez le lien d'un projet et donnez-le a votre Claude. Il aura tous les acces + les infos du projet.</p>
                <div class="claude-grid">
                    <div class="claude-project">
                        <span class="claude-project-icon">üí∞</span>
                        <span class="claude-project-name">Kooki</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'kooki')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Kooki" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üìà</span>
                        <span class="claude-project-name">CryptoSignals</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'cryptosignals')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/CryptoSignals" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">ü§ñ</span>
                        <span class="claude-project-name">Freqtrade</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'freqtrade')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Freqtrade-MEXC" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üì∏</span>
                        <span class="claude-project-name">Focus Racer</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'focusracer')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/focus-racer" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üé™</span>
                        <span class="claude-project-name">OptiTourBooth</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'optitourbooth')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/optitourbooth" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üÉè</span>
                        <span class="claude-project-name">Belotte</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'belotte')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Belotte" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üìÅ</span>
                        <span class="claude-project-name">Upload Tool</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'upload')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Upload" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">üëß</span>
                        <span class="claude-project-name">Alice</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'alice')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Alice" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                    <div class="claude-project">
                        <span class="claude-project-icon">‚öôÔ∏è</span>
                        <span class="claude-project-name">Admin Hub</span>
                        <div class="claude-project-btns">
                            <button class="btn-copy" onclick="copyProject(this, 'admin')">Copier</button>
                            <a class="btn-open" href="https://code.swipego.app/?folder=/home/coder/projects/Admin" target="_blank">Ouvrir</a>
                        </div>
                    </div>
                </div>
                <p class="claude-hint">Dites a votre Claude : "Fetch [le lien copie] pour avoir les acces du projet"</p>
            </div>
        </div>

        <!-- Acces infra complet -->
        <div class="section">
            <div class="section-title">Acces Infrastructure Complet</div>
            <div class="infra-box">
                <p>Tous les acces serveur, Coolify, Supabase, GitHub ‚Äî sans projet specifique.</p>
                <div class="infra-url">
                    <code>https://infra.swipego.app/api</code>
                    <button onclick="copyInfra(this)">Copier</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyProject(btn, name) {
    navigator.clipboard.writeText('https://infra.swipego.app/api/' + name);
    btn.textContent = 'Copie !';
    btn.style.background = '#238636';
    setTimeout(function() { btn.textContent = 'Copier'; btn.style.background = ''; }, 2000);
}
function downloadS3Creds() {
    var data = JSON.stringify({"userName":"user-JjsBnnJNmB49","description":"shootnbox","accessKey":"2d781d2297d7468396dc3a0ebb8842d3","secretKey":"8b73965386e140e9b1f61861be02aa4e"});
    var blob = new Blob([data], {type:'text/plain'});
    var a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'user-JjsBnnJNmB49.txt';
    a.click();
    URL.revokeObjectURL(a.href);
}
function copyInfra(btn) {
    navigator.clipboard.writeText('https://infra.swipego.app/api');
    btn.textContent = 'Copie !';
    btn.style.background = '#238636';
    setTimeout(function() { btn.textContent = 'Copier'; btn.style.background = ''; }, 2000);
}
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/js/config.js"></script>
<script src="/js/auth.js"></script>
<script>
(async function() {
    try {
        var session = await checkAuth();
        if (!session) return;
        renderNavbar('dashboard');
        await setNavbarUser();
        showPage();
    } catch(e) {
        console.error('Init error:', e);
        window.location.href = '/login.html';
    }
})();
</script>
</body>
</html>
